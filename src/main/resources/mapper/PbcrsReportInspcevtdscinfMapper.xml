<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hkbank.pbcrs.mapper.PbcrsReportInspcevtdscinfMapper">
	<resultMap id="BaseResultMap"
		type="com.hkbank.pbcrs.model.PbcrsReportInspcevtdscinf">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Mar 15 
			10:54:59 CST 2019. -->
		<id column="INSPCEVTDSCINFSEQNO" jdbcType="VARCHAR" property="InSpcEvtDscInfSeqNo" />
		<result column="INFRECTYPE" jdbcType="VARCHAR" property="InfRecType" />
		<result column="ACCTCODE" jdbcType="VARCHAR" property="AcctCode" />
		<result column="OPETNTYPE" jdbcType="VARCHAR" property="OpetnType" />
		<result column="MONTH" jdbcType="VARCHAR" property="Month" />
		<result column="FLAG" jdbcType="VARCHAR" property="Flag" />
		<result column="RPTDATE" jdbcType="VARCHAR" property="RptDate" />
		<result column="ETL_DATE" jdbcType="DATE" property="Etl_Date" />
		<result column="SOURCESYS" jdbcType="VARCHAR" property="SourceSys" />
		<result column="REPORTFLAG" jdbcType="VARCHAR" property="ReportFlag" />
	</resultMap>
	<delete id="deleteByPrimaryKey" parameterType="String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Mar 15 
			10:54:59 CST 2019. -->
		delete from PBCRS_REPORT_INSPCEVTDSCINF
		where INSPCEVTDSCINFSEQNO = #{InSpcEvtDscInfSeqNo,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="com.hkbank.pbcrs.model.PbcrsReportInspcevtdscinf">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Mar 15 
			10:54:59 CST 2019. -->
		insert into PBCRS_REPORT_INSPCEVTDSCINF (INSPCEVTDSCINFSEQNO,
		INFRECTYPE,
		ACCTCODE, OPETNTYPE, MONTH,
		FLAG, RPTDATE,ETL_DATE,SOURCESYS,REPORTFLAG)
		values (#{InSpcEvtDscInfSeqNo,jdbcType=VARCHAR},
		#{InfRecType,jdbcType=VARCHAR},
		#{AcctCode,jdbcType=VARCHAR}, #{OpetnType,jdbcType=VARCHAR}, #{Month,jdbcType=VARCHAR},
		#{Flag,jdbcType=VARCHAR}, #{RptDate,jdbcType=VARCHAR},#{Etl_Date,jdbcType=DATE},
		#{SourceSys,jdbcType=VARCHAR},#{ReportFlag,jdbcType=VARCHAR})
	</insert>
	<update id="updateByPrimaryKey" parameterType="com.hkbank.pbcrs.model.PbcrsReportInspcevtdscinf">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Mar 15 
			10:54:59 CST 2019. -->
		update PBCRS_REPORT_INSPCEVTDSCINF
		set INFRECTYPE = #{InfRecType,jdbcType=VARCHAR},
		ACCTCODE = #{AcctCode,jdbcType=VARCHAR},
		OPETNTYPE = #{OpetnType,jdbcType=VARCHAR},
		MONTH = #{Month,jdbcType=VARCHAR},
		FLAG = #{Flag,jdbcType=VARCHAR},
		RPTDATE = #{RptDate,jdbcType=VARCHAR},
		ETL_DATE = #{Etl_Date,jdbcType=DATE},
		SOURCESYS = #{SourceSys,jdbcType=VARCHAR},
		REPORTFLAG = #{ReportFlag,jdbcType=VARCHAR}
		where INSPCEVTDSCINFSEQNO = #{InSpcEvtDscInfSeqNo,jdbcType=VARCHAR}
	</update>
	<select id="selectByPrimaryKey" parameterType="String"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Mar 15 
			10:54:59 CST 2019. -->
		select INSPCEVTDSCINFSEQNO, INFRECTYPE, ACCTCODE, OPETNTYPE, MONTH,
		FLAG, RPTDATE,ETL_DATE,SOURCESYS,REPORTFLAG
		from PBCRS_REPORT_INSPCEVTDSCINF
		where INSPCEVTDSCINFSEQNO = #{InSpcEvtDscInfSeqNo,jdbcType=VARCHAR}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Mar 15 
			10:54:59 CST 2019. -->
		select INSPCEVTDSCINFSEQNO, INFRECTYPE, ACCTCODE, OPETNTYPE, MONTH,
		FLAG, RPTDATE,ETL_DATE,SOURCESYS,REPORTFLAG
		from PBCRS_REPORT_INSPCEVTDSCINF
	</select>
	
	<sql id="sql_query">
		
			
			<if test="queryDate != null and queryDate != ''">
				and ETL_DATE=to_date(#{queryDate},'yyyy-mm-dd')
			</if>
			<if test="queryAcctCode != null and queryAcctCode != ''">
				and ACCTCODE #{queryAcctCode}
			</if>
	
		
	</sql>
	<select id="selectPageList" parameterType="map" resultMap="BaseResultMap">
		select *
		   from (
				select t.*,rownum rm 
				   from(
					      select INSPCEVTDSCINFSEQNO,
					      		 INFRECTYPE,
					      		 ACCTCODE, 
					      		 OPETNTYPE, 
					      		 MONTH,
								 FLAG, 
								 RPTDATE,
								 ETL_DATE,
								 SOURCESYS,
								 REPORTFLAG
						    from PBCRS_REPORT_INSPCEVTDSCINF
						    where  REPORTFLAG='0'
						    <include refid="sql_query"/>
			           )t where rownum &lt; #{endindex}
		        ) b
  		 where rm >= #{startindex}
  		 
	</select>
	
	<select id="selectPageCount" parameterType="map" resultType="int">
	      select count(1)
		    from PBCRS_REPORT_INSPCEVTDSCINF
		     where  REPORTFLAG='0'
		    <include refid="sql_query"/>
	</select>
	
	<select id="selectOrgCode"  resultType="string">
	      select PARAMVALUE
		    from PBCRS_SYS_CONFIG
		    where PARAMNAME ='ORGCODE'
		    
	</select>
	
	
</mapper>