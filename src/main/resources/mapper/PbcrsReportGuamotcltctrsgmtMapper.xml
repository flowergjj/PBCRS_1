<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hkbank.pbcrs.mapper.PbcrsReportGuamotcltctrsgmtMapper">
	<resultMap id="BaseResultMap"
		type="com.hkbank.pbcrs.model.PbcrsReportGuamotcltctrsgmt">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 25 
			16:34:52 CST 2019. -->
		<id column="GUARMOTGACLTALCTRCTINFSGMTSEQN" jdbcType="VARCHAR"
			property="GuarMotgaCltalCtrctInfSgmtSeqN" />
		<result column="CCNM" jdbcType="VARCHAR" property="CcNm" />
		<result column="REPORTFLAG" jdbcType="VARCHAR" property="reportflag" />
	</resultMap>
	<delete id="deleteByPrimaryKey" parameterType="String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 25 
			16:34:52 CST 2019. -->
		delete from PBCRS_REPORT_GUAMOTCLTCTRSGMT
		where
		GUARMOTGACLTALCTRCTINFSGMTSEQN =
		#{GuarMotgaCltalCtrctInfSgmtSeqN,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="com.hkbank.pbcrs.model.PbcrsReportGuamotcltctrsgmt">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 25 
			16:34:52 CST 2019. -->
		insert into PBCRS_REPORT_GUAMOTCLTCTRSGMT
		(GUARMOTGACLTALCTRCTINFSGMTSEQN, CCNM,
		REPORTFLAG)
		values
		(#{GuarMotgaCltalCtrctInfSgmtSeqN,jdbcType=VARCHAR},
		#{CcNm,jdbcType=VARCHAR},
		#{reportflag,jdbcType=VARCHAR})
	</insert>
	<update id="updateByPrimaryKey" parameterType="com.hkbank.pbcrs.model.PbcrsReportGuamotcltctrsgmt">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 25 
			16:34:52 CST 2019. -->
		update PBCRS_REPORT_GUAMOTCLTCTRSGMT
		set CCNM =
		#{CcNm,jdbcType=VARCHAR},
		REPORTFLAG = #{reportflag,jdbcType=VARCHAR}
		where GUARMOTGACLTALCTRCTINFSGMTSEQN =
		#{GuarMotgaCltalCtrctInfSgmtSeqN,jdbcType=VARCHAR}
	</update>
	<select id="selectByPrimaryKey" parameterType="String"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 25 
			16:34:52 CST 2019. -->
		select GUARMOTGACLTALCTRCTINFSGMTSEQN, CCNM, REPORTFLAG
		from
		PBCRS_REPORT_GUAMOTCLTCTRSGMT
		where GUARMOTGACLTALCTRCTINFSGMTSEQN =
		#{GuarMotgaCltalCtrctInfSgmtSeqN,jdbcType=VARCHAR}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 25 
			16:34:52 CST 2019. -->
		select GUARMOTGACLTALCTRCTINFSGMTSEQN, CCNM, REPORTFLAG
		from
		PBCRS_REPORT_GUAMOTCLTCTRSGMT
	</select>
	<sql id="sql_query">

		<if test="queryDate != null and queryDate != ''">
			and baseinfo.rptdate=#{queryDate}
		</if>
		<if test="queryName != null and queryName != ''">
			and baseinfo.name=#{queryName}
		</if>
		<if test="queryNum != null and queryNum != ''">
			and baseinfo.idnum=#{queryNum}
		</if>
		<if test="queryCimoc != null and queryCimoc != ''">
			and baseinfo.cimoc=#{queryCimoc}
		</if>

	</sql>

	<select id="getByPage" resultType="map">
		select * from (
			select info1.*,ROWNUM RN from (
			 	select 
    			MotgaCltalCtrctInfSgmtSeqNo,ccc,MotgaCltalCtrctInfSeqNo
   				 from pbcrs_report_GuaMotCltCtrSgmt info1
     			join pbcrs_report_cccinf info2
    			on info1.guarmotgacltalctrctinfsgmtseqn=info2.motgacltalctrctinfsgmtseqno   and MOTGACLTALCTRCTINFTYPE='GU'
    			where GuarMotgaCltalCtrctInfSgmtSeqN=#{GuarMotgaCltalCtrctInfSgmtSeqNo}
				<include refid="sql_query" />
		)info1 where ROWNUM &lt;#{endindex}
		)where RN &gt;=#{startindex}
	</select>
	<select id="getByPageCount" resultType="int">
		select 
    			count(1)
   				 from pbcrs_report_GuaMotCltCtrSgmt info1
     			join pbcrs_report_cccinf info2
    			on info1.guarmotgacltalctrctinfsgmtseqn=info2.motgacltalctrctinfsgmtseqno   and MOTGACLTALCTRCTINFTYPE='GU'
    			where GuarMotgaCltalCtrctInfSgmtSeqN=#{GuarMotgaCltalCtrctInfSgmtSeqNo}
		<include refid="sql_query" />
	</select>
	
	<delete id="deleteByPrimaryKeyM" parameterType="String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 25 
			16:34:52 CST 2019. -->
		delete from PBCRS_REPORT_GUAMOTCLTCTRSGMTM
		where
		GUARMOTGACLTALCTRCTINFSGMTSEQN =
		#{GuarMotgaCltalCtrctInfSgmtSeqN,jdbcType=VARCHAR}
	</delete>
	<insert id="insertM" parameterType="com.hkbank.pbcrs.model.PbcrsReportGuamotcltctrsgmt">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 25 
			16:34:52 CST 2019. -->
		insert into PBCRS_REPORT_GUAMOTCLTCTRSGMTM
		(GUARMOTGACLTALCTRCTINFSGMTSEQN, CCNM,
		REPORTFLAG)
		select GUARMOTGACLTALCTRCTINFSGMTSEQN, CCNM, '0'
		from
		PBCRS_REPORT_GUAMOTCLTCTRSGMT
		where GUARMOTGACLTALCTRCTINFSGMTSEQN =
		#{GuarMotgaCltalCtrctInfSgmtSeqN,jdbcType=VARCHAR}
	</insert>
</mapper>