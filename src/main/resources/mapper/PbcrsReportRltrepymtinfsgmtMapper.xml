<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hkbank.pbcrs.mapper.PbcrsReportRltrepymtinfsgmtMapper">
	<resultMap id="BaseResultMap"
		type="com.hkbank.pbcrs.model.PbcrsReportRltrepymtinfsgmt">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Apr 28 
			11:02:17 CST 2019. -->
		<id column="RLTREPYMTINFSGMTSEQNO" jdbcType="VARCHAR" property="RltRepymtInfSgmtSeqNo" />
		<result column="RLTREPYMTNM" jdbcType="VARCHAR" property="RltRepymtNm" />
		<result column="REPORTFLAG" jdbcType="VARCHAR" property="reportflag" />
	</resultMap>
	<delete id="deleteByPrimaryKey" parameterType="String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Apr 28 
			11:02:17 CST 2019. -->
		delete from PBCRS_REPORT_RLTREPYMTINFSGMT
		where RLTREPYMTINFSGMTSEQNO = #{RltRepymtInfSgmtSeqNo,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="com.hkbank.pbcrs.model.PbcrsReportRltrepymtinfsgmt">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Apr 28 
			11:02:17 CST 2019. -->
		insert into PBCRS_REPORT_RLTREPYMTINFSGMT (RLTREPYMTINFSGMTSEQNO,
		RLTREPYMTNM,
		REPORTFLAG)
		values (#{RltRepymtInfSgmtSeqNo,jdbcType=VARCHAR},
		#{RltRepymtNm,jdbcType=VARCHAR},
		#{reportflag,jdbcType=VARCHAR})
	</insert>
	<update id="updateByPrimaryKey" parameterType="com.hkbank.pbcrs.model.PbcrsReportRltrepymtinfsgmt">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Apr 28 
			11:02:17 CST 2019. -->
		update PBCRS_REPORT_RLTREPYMTINFSGMT
		set RLTREPYMTNM = #{RltRepymtNm,jdbcType=VARCHAR},
		REPORTFLAG = #{reportflag,jdbcType=VARCHAR}
		where RLTREPYMTINFSGMTSEQNO = #{RltRepymtInfSgmtSeqNo,jdbcType=VARCHAR}
	</update>
	<select id="selectByPrimaryKey" parameterType="String"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Apr 28 
			11:02:17 CST 2019. -->
		select RLTREPYMTINFSGMTSEQNO, RLTREPYMTNM, REPORTFLAG
		from PBCRS_REPORT_RLTREPYMTINFSGMT
		where RLTREPYMTINFSGMTSEQNO = #{RltRepymtInfSgmtSeqNo,jdbcType=VARCHAR}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Apr 28 
			11:02:17 CST 2019. -->
		select RLTREPYMTINFSGMTSEQNO, RLTREPYMTNM, REPORTFLAG
		from PBCRS_REPORT_RLTREPYMTINFSGMT
	</select>
	<sql id="sql_query">
		<if test="idSgmtName != null and idSgmtName != ''">
			and alias=#{idSgmtName}
		</if>
		<if test="idSgmtIdNum != null and idSgmtIdNum != ''">
			and othidnum=#{idSgmtIdNum}
		</if>
	</sql>
	<select id="getRltRepymtInfList" resultType="map" parameterType="map">
		select * from
		(
		select info.*,rownum RN from
		(
		select
		info2.RLTREPYMTINFSGMTSEQNO,RltRepymtInfSeqNo,InfoIDType,ArlpName,ArlpCertType,ArlpCertNum,ARLPTYPE,ArlpAmt,WartySign,MaxGuarMcc
		from pbcrs_report_RltRepymtInfSgmt info1
		join pbcrs_report_RltRepymtInf info2
		on info1.rltrepymtinfsgmtseqno=info2.rltrepymtinfsgmtseqno
		where info1.rltrepymtinfsgmtseqno=#{RltRepymtInfSgmtSeqNo}
		<include refid="sql_query" />
		) info where rownum &lt; #{endindex}
		)where rn &gt;= #{startindex}
	</select>

	<select id="getRltRepymtInfListTotal" resultType="int"
		parameterType="map">
		select count(1)
		from pbcrs_report_RltRepymtInfSgmt info1
		join pbcrs_report_RltRepymtInf info2
		on info1.rltrepymtinfsgmtseqno=info2.rltrepymtinfsgmtseqno
		where info1.rltrepymtinfsgmtseqno=#{RltRepymtInfSgmtSeqNo}
		<include refid="sql_query" />
	</select>
	<delete id="deleteByPrimaryKeyM" parameterType="String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Apr 28 
			11:02:17 CST 2019. -->
		delete from PBCRS_REPORT_RLTREPYMTINFSGMTM
		where RLTREPYMTINFSGMTSEQNO = #{RltRepymtInfSgmtSeqNo,jdbcType=VARCHAR}
	</delete>
	<insert id="insertM" parameterType="String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Apr 28 
			11:02:17 CST 2019. -->
		insert into PBCRS_REPORT_RLTREPYMTINFSGMTM (RLTREPYMTINFSGMTSEQNO,
		RLTREPYMTNM,
		REPORTFLAG,
		ETL_DATE,SOURCESYS)
		select RLTREPYMTINFSGMTSEQNO, RLTREPYMTNM,
		'0',
		ETL_DATE,SOURCESYS from PBCRS_REPORT_RLTREPYMTINFSGMT
		where
		RLTREPYMTINFSGMTSEQNO = #{RltRepymtInfSgmtSeqNo,jdbcType=VARCHAR}

	</insert>
</mapper>